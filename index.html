
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>5/3/1 Workout Tracker</title>
    <style>
    body {
    font-family: Arial, sans-serif;
    background-color: #121212; /* very dark grey for the background */
    color: #e0e0e0; /* light grey for text */
    margin: 0;
    padding: 20px;
}

.week-table {
    display: flex;
    justify-content: space-around;
    margin-bottom: 20px;
}

.table-container {
    flex: 1;
    margin: 10px;
    background-color: #222;
    border-radius: 8px;
    padding: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    overflow: hidden; /* Contains the rounded corners to the container */
}

table {
    width: 100%;
    border-collapse: separate; /* This allows for the use of border-radius */
    border-spacing: 0; /* No spacing between cells */
}

th, td {
    background-color: #333; /* Background color for table cells */
    color: #fff; /* Text color for table cells */
    border: 1px solid #555; /* Borders for cells */
    padding: 8px;
    text-align: center;
}

th:first-child {
    border-top-left-radius: 0;
}

th:last-child {
    border-top-right-radius: 0;
}

tr:last-child td:first-child {
    border-bottom-left-radius: 0;
}

tr:last-child td:last-child {
    border-bottom-right-radius: 0;
}

/* Ensure the outermost container has rounded corners */
.table-container {
    border-radius: 8px; /* Apply rounded corners to the container */
    overflow: hidden; /* Ensures that child elements do not overflow the rounded corners */
}

input[type="number"], button {
    background-color: #333;
    border: none;
    padding: 8px;
    color: white;
    margin: 5px;
    border-radius: 4px;
}

input[type="number"] {
    width: 60px;
}

button:hover {
    background-color: #444;
    cursor: pointer;
}

/* Custom Checkbox Styles */
.set-checkbox {
    appearance: none;
    -webkit-appearance: none;
    background-color: #333; /* Background color of the checkbox */
    margin: 0 10px;
    font: inherit;
    color: #e0e0e0;
    width: 20px; /* Width of the checkbox */
    height: 20px; /* Height of the checkbox */
    border: 2px solid #e0e0e0; /* Border color of the checkbox */
    border-radius: 4px; /* Slightly rounded corners for the checkbox */
    display: inline-block;
    position: relative;
    vertical-align: middle;
    cursor: pointer;
    transition: background-color 0.2s, border-color 0.2s; /* Smooth transition for background and border color changes */
}

/* Checkbox Checked State */
.set-checkbox:checked {
    background-color: #4CAF50; /* Change background when checked */
    border-color: #4CAF50; /* Change border color when checked */
}

/* Checkbox Checkmark Style */
.set-checkbox:checked:after {
    content: "";
    position: absolute;
    left: 6px;
    top: 2px;
    width: 5px;
    height: 10px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
}

.week-header {
    cursor: pointer;
    color: #e0e0e0;
    background-color: #333;
    padding: 10px;
    margin-top: 10px;
    border-radius: 4px;
}

.week-header:hover {
    background-color: #444; /* Slightly lighter on hover */
}

.week-table {
    padding: 10px;
    background-color: #222;
    border-radius: 4px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

    </style>
</head>
<body>
    <h1>5/3/1 Workout Tracker</h1>
    <div>
        <label for="squatTM">Squat TM:</label>
        <input type="number" id="squatTM" placeholder="TM">
        <label for="benchTM">Bench Press TM:</label>
        <input type="number" id="benchTM" placeholder="TM">
        <label for="deadliftTM">Deadlift TM:</label>
        <input type="number" id="deadliftTM" placeholder="TM">
        <label for="ohpTM">OHP TM:</label>
        <input type="number" id="ohpTM" placeholder="TM">
        <button id="updateWeightsBtn">Update Weights</button>
        <button id="resetButton" onclick="resetCheckboxes()">Reset Progress</button>
    </div>

    <div id="weekCycles">
        <!-- Weeks generated by JavaScript -->
    </div>

    <script>
    const exercises = {
    'Squat': 'squatTM',
    'Bench Press': 'benchTM',
    'Deadlift': 'deadliftTM',
    'Overhead Press': 'ohpTM'
};

const weekDetails = [
    {
        week: 1,
        days: [
            { day: 'Monday, Friday', lifts: [
                { type: 'Squat', sets: [65, 75, 85, 65], reps: ['5', '5', '5+', '5x5'] },
                { type: 'Bench Press', sets: [65, 75, 85, 65], reps: ['5', '5', '5+', '5x5'] }
            ]},
            { day: 'Wednesday', lifts: [
                { type: 'Deadlift', sets: [65, 75, 85, 65], reps: ['5', '5', '5+', '5x5'] },
                { type: 'Overhead Press', sets: [65, 75, 85, 65], reps: ['5', '5', '5+', '5x5'] }
            ]}
        ]
    },
    {
        week: 2,
        days: [
            { day: 'Monday, Friday', lifts: [
                { type: 'Squat', sets: [70, 80, 90, 70], reps: ['3', '3', '3+', '5x5'] },
                { type: 'Bench Press', sets: [70, 80, 90, 70], reps: ['3', '3', '3+', '5x5'] }
            ]},
            { day: 'Wednesday', lifts: [
                { type: 'Deadlift', sets: [70, 80, 90, 70], reps: ['3', '3', '3+', '5x5'] },
                { type: 'Overhead Press', sets: [70, 80, 90, 70], reps: ['3', '3', '3+', '5x5'] }
            ]}
        ]
    },
    {
        week: 3,
        days: [
            { day: 'Monday, Friday', lifts: [
                { type: 'Squat', sets: [75, 85, 95, 75], reps: ['5', '3', '1+', '5x5'] },
                { type: 'Bench Press', sets: [75, 85, 95, 75], reps: ['5', '3', '1+', '5x5'] }
            ]},
            { day: 'Wednesday', lifts: [
                { type: 'Deadlift', sets: [75, 85, 95, 75], reps: ['5', '3', '1+', '5x5'] },
                { type: 'Overhead Press', sets: [75, 85, 95, 75], reps: ['5', '3', '1+', '5x5'] }
            ]}
        ]
    }
];

function updateWeights() {
    saveTMs();
    const container = document.getElementById('weekCycles');
    container.innerHTML = '';

    weekDetails.forEach((week, weekIndex) => {
        const weekDiv = document.createElement('div');
        weekDiv.className = 'week-div';

        // Create a clickable header for each week
        const weekHeader = document.createElement('h2');
        weekHeader.innerText = `Week ${week.week}`;
        weekHeader.className = 'week-header';
        weekHeader.onclick = function() { toggleWeekDetails(weekIndex); };
        weekDiv.appendChild(weekHeader);

        // Container for the week tables, initially hidden
        const weekTableContainer = document.createElement('div');
        weekTableContainer.className = 'week-table';
        weekTableContainer.id = `week-${weekIndex}-details`;
        weekTableContainer.style.display = 'none'; // Start with the details hidden

        week.days.forEach((day, dayIndex) => {
            const dayDiv = document.createElement('div');
            dayDiv.className = 'table-container';
            const dayTable = document.createElement('table');
            dayTable.innerHTML = `<tr><th colspan="6">${day.day}</th></tr>`;
            dayTable.innerHTML += `<tr><th>Lift</th><th>Set 1</th><th>Set 2</th><th>Set 3</th><th>Sets 4,5,6,7,8</th></tr>`;

            day.lifts.forEach((lift, liftIndex) => {
                const row = document.createElement('tr');
                row.innerHTML = `<td>${lift.type}</td>` +
                    lift.sets.map((percent, setIndex) => {
                        const setId = `checkbox-${weekIndex}-${dayIndex}-${liftIndex}-${setIndex}`;
                        const weight = calculateWeight(document.getElementById(exercises[lift.type]).value, percent);
                        const checkboxHTML = `<input type="checkbox" id="${setId}" class="set-checkbox" onclick="saveCheckboxState('${setId}')">`;
                        return `<td>${weight} x ${lift.reps[setIndex]} ${checkboxHTML}</td>`;
                    }).join('');
                dayTable.appendChild(row);
            });

            dayDiv.appendChild(dayTable);
            weekTableContainer.appendChild(dayDiv);
        });

        weekDiv.appendChild(weekTableContainer);
        container.appendChild(weekDiv);
    });

    loadCheckboxState();
}

function calculateWeight(tm, percent) {
    return Math.floor(tm * (percent / 100));
}

document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('updateWeightsBtn').addEventListener('click', updateWeights);
});



function toggleWeekDetails(weekIndex) {
    const details = document.getElementById(`week-${weekIndex}-details`);
    const isHidden = details.style.display === 'none';

    // Toggle display state
    details.style.display = isHidden ? 'block' : 'none';

    // Save the new state to localStorage
    localStorage.setItem(`week-${weekIndex}-collapsed`, !isHidden);
}

function loadWeekStates() {
    weekDetails.forEach((_, weekIndex) => {
        const details = document.getElementById(`week-${weekIndex}-details`);
        const isCollapsed = localStorage.getItem(`week-${weekIndex}-collapsed`) === 'true';

        // Set the display based on the saved state
        details.style.display = isCollapsed ? 'none' : 'block';
    });
}

// Saves the TMs to localStorage
function saveTMs() {
    const squatTM = document.getElementById('squatTM').value;
    const benchTM = document.getElementById('benchTM').value;
    const deadliftTM = document.getElementById('deadliftTM').value;
    const ohpTM = document.getElementById('ohpTM').value;
    
    localStorage.setItem('squatTM', squatTM);
    localStorage.setItem('benchTM', benchTM);
    localStorage.setItem('deadliftTM', deadliftTM);
    localStorage.setItem('ohpTM', ohpTM);

    // Save checkbox states
    const checkboxes = document.querySelectorAll('.set-checkbox');
    checkboxes.forEach((checkbox, index) => {
        localStorage.setItem(`checkbox-${index}`, checkbox.checked);
    });
}

// Loads the TMs and updates the display if TMs are found when the page is loaded
function loadTMs() {
    const squatTM = localStorage.getItem('squatTM');
    const benchTM = localStorage.getItem('benchTM');
    const deadliftTM = localStorage.getItem('deadliftTM');
    const ohpTM = localStorage.getItem('ohpTM');

    if (squatTM) document.getElementById('squatTM').value = squatTM;
    if (benchTM) document.getElementById('benchTM').value = benchTM;
    if (deadliftTM) document.getElementById('deadliftTM').value = deadliftTM;
    if (ohpTM) document.getElementById('ohpTM').value = ohpTM;

    // If any TM is found, automatically update the weights
    if (squatTM || benchTM || deadliftTM || ohpTM) {
        updateWeights();
    }
}

// Restore checkbox states
function loadCheckboxState() {
    const checkboxes = document.querySelectorAll('.set-checkbox');
    checkboxes.forEach((checkbox, index) => {
        const checkedState = localStorage.getItem(`checkbox-${index}`) === 'true';
        checkbox.checked = checkedState;
    });
}

function saveCheckboxState(id) {
    const checkbox = document.getElementById(id);
    localStorage.setItem(`checkbox-${id}`, checkbox.checked);

    updateWeights();
    toggleWeekDetails(parseInt(id.split('-')[1]));
}

function resetCheckboxes() {
    if (confirm('Are you sure you want to reset all progress?')) {
        const checkboxes = document.querySelectorAll('.set-checkbox');
        checkboxes.forEach((checkbox, index) => {
            checkbox.checked = false;
            localStorage.removeItem(`checkbox-${index}`);
        });
    }
}

// Call loadCheckboxStates on window load
window.onload = function() {
    loadTMs(); // Existing TM load function
    loadCheckboxState();
    loadWeekStates();
};

    </script>
</body>
</html>
